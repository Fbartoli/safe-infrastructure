# ============================================================================
# Safe Infrastructure - Coolify Environment Variables
# ============================================================================
# Copy this file content into Coolify's Environment Variables section.
# Generate secure values for secrets using: openssl rand -base64 32
#
# IMPORTANT: In Coolify, set these in the "Environment Variables" tab of your
# Docker Compose resource. Coolify will inject them at deploy time.
# ============================================================================

# ============================================================================
# REQUIRED - These must be set for the stack to work
# ============================================================================

# Blockchain RPC endpoint (Infura, Alchemy, or your own node)
RPC_NODE_URL=https://mainnet.infura.io/v3/YOUR_INFURA_KEY

# Security secrets - GENERATE UNIQUE VALUES FOR PRODUCTION!
# Run: openssl rand -base64 32
DJANGO_SECRET_KEY=CHANGE_ME_GENERATE_WITH_OPENSSL
CGW_AUTH_TOKEN=CHANGE_ME_GENERATE_WITH_OPENSSL

# Database password - use a strong password
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ============================================================================
# REQUIRED - Public URL Configuration
# ============================================================================

# Your public domain (Coolify will route traffic here)
PUBLIC_URL=https://safe.yourdomain.com

# Trusted origins for CSRF protection (comma-separated if multiple)
CSRF_TRUSTED_ORIGINS=https://safe.yourdomain.com

# Media URL for uploaded files (config service)
MEDIA_URL=https://safe.yourdomain.com/cfg/media/

# ============================================================================
# OPTIONAL - Admin Credentials
# ============================================================================

# Django admin username (default: root)
ADMIN_USERNAME=root

# Django admin password (default: admin) - CHANGE FOR PRODUCTION!
ADMIN_PASSWORD=CHANGE_ME_ADMIN_PASSWORD

# Admin email address
ADMIN_EMAIL=admin@yourdomain.com

# ============================================================================
# OPTIONAL - Service Versions (pin to specific versions for production)
# ============================================================================

# Leave as 'latest' or pin to specific versions
CFG_VERSION=latest
CGW_VERSION=latest
TXS_VERSION=latest
UI_VERSION=latest
EVENTS_VERSION=latest

# ============================================================================
# OPTIONAL - External Services
# ============================================================================

# Infura token for UI blockchain interactions (recommended)
INFURA_TOKEN=

# Tenderly integration for transaction simulation
TENDERLY_SIMULATE_URL=
TENDERLY_PROJECT=
TENDERLY_ORG=

# ============================================================================
# OPTIONAL - Port Configuration (rarely needed, Coolify handles routing)
# ============================================================================

# Internal nginx port (Coolify's Traefik proxies to this)
REVERSE_PROXY_PORT=8000

# ============================================================================
# COOLIFY-SPECIFIC NOTES
# ============================================================================
#
# 1. SERVICE DISCOVERY
#    Services communicate using internal Docker DNS names:
#    - cfg-db, txs-db, events-db, cgw-db (databases)
#    - txs-redis, cgw-redis (Redis instances)
#    - txs-rabbitmq, general-rabbitmq (RabbitMQ)
#    - nginx:8000 (internal gateway for inter-service calls)
#
# 2. TRAEFIK INTEGRATION
#    Coolify automatically adds Traefik labels for SSL termination.
#    The nginx service is the main entrypoint.
#
# 3. VOLUMES
#    Coolify remaps volumes to its managed paths. Data persistence works
#    automatically.
#
# 4. CHAIN CONFIGURATION
#    After deployment, configure chains in Config Service admin:
#    - Transaction Service URI: http://nginx:8000/txs
#    - VPC Transaction Service URI: http://nginx:8000/txs
#
# 5. WEBHOOKS SETUP
#    In Events Service admin, create webhook:
#    - URL: http://nginx:8000/cgw/v1/hooks/events
#    - Authorization: Basic <base64 of CGW_AUTH_TOKEN>
#
